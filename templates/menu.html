{% extends "layout.html" %}

{% block title %}
  Menu
{% endblock %}  

{% block main %}
<h1 id="title_menu">Menu CS50 Pizza Restaurant</h1>
<h4 id="pizzas">Pizzas</h4>
<form action="/menu" method="post">
  <div id="menu_conatainer">
    <div class="menu_products">
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button  type="submit" id="calabresa" value="calabresa" name="calabresa" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" name="margherita" value="margherita" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
      <div class="pizzas">
        <h6>Pizza de Calabresa</h6>
        <p>Ingredientes: Massa artesanal, molho de tomate, mozzarela, calabresa, cebola roxa e orégano.<br>
          <strong>Valor: R$50,00</strong></p>
          <button id="pizza" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
      </div>
      
    </div>
    <h4 id="sobremesas">Sobremesas</h4>
    <div id="menu_conatainer">
      <div class="menu_products">
        <div class="sobremesas">
          <h6>Chocolate</h6>
          <p>Chocolate belga 40% cacau<br>
            <strong>Valor: R$50,00</strong></p>
            <button name="brownie" value="brownie" id="dessert" onclick="addCarrinho(event)" >Adicionar ao carrinho</button>
        </div>
        <div class="sobremesas">
          <h6>Chocolate</h6>
          <p>Chocolate belga 40% cacau<br>
            <strong>Valor: R$50,00</strong></p>
            <button name="brownie" id="dessert" onclick="addCarrinho(event)" >Adicionar ao carrinho</button>
        </div>
        <div class="sobremesas">
          <h6>Chocolate</h6>
          <p>Chocolate belga 40% cacau<br>
            <strong>Valor: R$50,00</strong></p>
            <button id="dessert" onclick="addCarrinho(event)" >Adicionar ao carrinho</button>
        </div>
        <div class="sobremesas">
          <h6>Chocolate</h6>
          <p>Chocolate belga 40% cacau<br>
            <strong>Valor: R$50,00</strong></p>
            <button id="dessert" onclick="addCarrinho(event)" >Adicionar ao carrinho</button>
        </div>
  </div>
    </div>
    <h4 id="bebidas">Bebidas</h4>
    <div id="menu_conatainer">
      <div class="menu_products">
        <div class="bebidas">
          <h6>Refrigerante</h6>
          <p><strong>Valor: R$50,00</strong></p>
            <button name="coca" value="coca" id="drinks" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
        </div>
        <div class="bebidas">
          <h6>Refrigerante</h6>
          <p><strong>Valor: R$50,00</strong></p>
          <button id="drinks" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
        </div>
        <div class="bebidas">
          <h6>Refrigerante</h6>
          <p><strong>Valor: R$50,00</strong></p>
          <button id="drinks" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
        </div>
        <div class="bebidas">
          <h6>Refrigerante</h6>
          <p><strong>Valor: R$50,00</strong></p>
          <button id="drinks" onclick="addCarrinho(event)">Adicionar ao carrinho</button>
        </div>
        <div class="bebidas">
          <h6>Refrigerante</h6>
          <p><strong>Valor: R$50,00</strong></p>
          <button id="drinks" onclick="addCarrinho(event)" type="button">Adicionar ao carrinho</button>
        </div>
    </div>
    <div id="order_menu" class="total_pedido">
      {% if order %}
      <strong>TOTAL:</strong>R${{ total }} <br>
       <button  class="totalB" name="view_order" value="view_order">Ver pedido</button>
      {% endif %}
    </div>

</form>
 
<script type=text/javascript>

  const isLogIn = {{ isLoggedIn | tojson | safe }}
  async function addCarrinho(event) {
    event.preventDefault()
     
      if (!isLogIn) {
          window.alert("Você precisa estar logado para continuar")
      } else {
        window.alert("Adcionado item com sucesso!")
        event.target.form.submit()

      try {
        let response = await fetch ('/menu', {
          method:'GET',
          headers: {'Content-type': 'application/json' }
        
        })

        if (response.ok) {
          let result = await response.json()
          document.getElementById('order_menu').innerHTML = result.html
        }
      }   
  }
}
</script>
{% endblock %}

